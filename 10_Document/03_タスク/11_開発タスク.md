# iOSバス時刻表アプリ 開発タスクリスト (WBS)

## 1. プロジェクト基盤の構築 (Phase 1)
- [x] **1-1. Xcodeプロジェクトの新規作成**
    - 基本的なアプリの設定（アプリ名、IDなど）を行う。
- [ ] **1-2. 必要なライブラリの導入**
    - **GTFS-JPデータ処理のためのCSVパーシング機能の確認** (iOS標準機能で対応)
    - **HTTP通信ライブラリの確認** (iOS標準機能で対応)

---

## 2. データ取得ロジックの実装 (Phase 2)
- [ ] **2-1. 時刻表データ取得機能の実装**
    - GTFS-JP仕様書第3版データを取得する。
    - GTFSデータから「時刻」「路線名」「行き先」「のりば番号」を抽出するロジックを作成する。
- [ ] **2-3. ダイヤ自動選択機能の実装**
    - 祝日判定と曜日判定を組み合わせ、適切なGTFSサービスを選択するロジックを作成する。

---

## 3. データ永続化 (Phase 3)
- [ ] **3-1. 設定データモデルの作成**
    - 「設定名」「GTFSルート識別子リスト（行き・帰り）」「行き/帰り接近情報URL」を保持するデータ構造を定義する。
- [ ] **3-2. 設定の保存・読み込み機能の実装**
    - `UserDefaults` や `SwiftData` などを利用し、iPhone内に設定を保存・読み出しする機能を実装する。

---

## 4. UI (画面) の実装 (Phase 4)
- [ ] **4-1. 設定画面の実装**
    - 設定の一覧を表示するリストを作成する。
    - 設定を新規追加・編集するためのフォーム画面を作成する。
    - 設定を削除する機能を実装する。
- [ ] **4-2. 時刻表画面の実装**
    - 「行き」「帰り」を切り替えるタブ（セグメントコントロール）を配置する。
    - 現在時刻を1秒ごとに更新して表示するラベルを配置する。
    - バスの予定を一覧表示するリストを作成する。
    - 接近情報ページを表示するためのボタンを配置する。
- [ ] **4-3. アプリ内ブラウザの実装**
    - 接近情報ボタンをタップした際に、指定されたURLをWebViewで表示する画面を実装する。

---

## 5. 全機能の結合と仕上げ (Phase 5)
- [ ] **5-1. データとUIの連携**
    - 起動時に保存された設定を読み込み、時刻表画面に反映させる。
    - 設定画面の変更が、即座に時刻表画面に反映されるようにする。
- [ ] **5-2. 動的更新ロジックの組み込み**
    - 現在時刻とバスの出発時刻を比較し、過ぎたものをグレーアウトする処理を組み込む。
- [ ] **5-3. 全体テストとデバッグ**
    - 全ての機能が仕様書通りに動作するかを確認し、不具合（バグ）を修正する。
- [ ] **5-4. アプリのビルド**
    - 開発が完了したアプリを、実機（iPhone）で動かせる形式のファイルとして出力する。